# 동아리 회계 관리 웹앱 개발 계획서

## 1. 프로젝트 개요

### 목적

동아리 연간 수입/지출 내역을 입력하고, 정산 보고서를 자동 생성하는 모바일 웹 앱

### 주요 사용자

- 동아리 회계 담당자
- 모바일 기반 UI (데스크탑도 지원)

### UI 원칙

- **Mobile First**: 모바일 화면 기준으로 설계
- 데스크탑은 모바일 레이아웃 유지 (중앙 정렬, 최대 너비 제한)
- 터치 친화적 버튼 크기 (최소 44px)
- 입력 필드는 모바일 키보드 고려

### 핵심 가치

- 데이터 입력만 하면 보고서 자동 생성
- 합계/잔액 자동 계산
- 이미지로 저장 가능

---

## 2. 기술 스택

```
Framework: React 18+ with TypeScript
Build Tool: Vite
Styling: Tailwind CSS
Storage: localStorage (데이터 저장)
Image Export: html2canvas (보고서를 이미지로 저장)
```

---

## 3. 데이터 구조

```typescript
// 기본 정보
interface BasicInfo {
  year: number; // 연도 (예: 2025)
  clubName: string; // 동아리명 (예: "한랑드림")
  carryover: number; // 전년도 이월금 (예: 370482)
}

// 지출 상세 항목
interface ExpenseItem {
  id: string; // 고유 ID (uuid)
  name: string; // 항목명 (예: "대관료", "간식비(2건)")
  amount: number; // 금액 (예: 40000)
}

// 월별 데이터
interface MonthlyData {
  month: number; // 1~12
  income: number; // 수입 총액
  expense: number; // 지출 총액 (자동 계산 또는 수동 입력)
  expenseItems: ExpenseItem[]; // 지출 상세 목록
}

// 수입 내역 항목
interface IncomeItem {
  id: string; // 고유 ID
  name: string; // 항목명 (예: "회비(14인)")
  amount: number; // 금액 (예: 1630000)
}

// 전체 데이터
interface AccountingData {
  basicInfo: BasicInfo;
  monthlyData: MonthlyData[]; // 12개월 배열
  incomeItems: IncomeItem[]; // 수입 내역 목록
  lastUpdated: string; // 마지막 수정 일시
}
```

---

## 4. 화면 구성

### 4.1 메인 화면 (탭 네비게이션)

```
┌─────────────────────────────────────┐
│  [기본정보] [월별입력] [수입내역] [미리보기] │
└─────────────────────────────────────┘
```

### 4.2 기본정보 탭

```
┌─────────────────────────────────────┐
│         📊 기본 정보                  │
├─────────────────────────────────────┤
│                                     │
│  연도                                │
│  ┌─────────────────────────────┐   │
│  │ 2025                        │   │
│  └─────────────────────────────┘   │
│                                     │
│  동아리명                            │
│  ┌─────────────────────────────┐   │
│  │ 한랑드림                     │   │
│  └─────────────────────────────┘   │
│                                     │
│  전년도 이월금                        │
│  ┌─────────────────────────────┐   │
│  │ 370,482                     │   │
│  └─────────────────────────────┘   │
│                                     │
└─────────────────────────────────────┘
```

### 4.3 월별입력 탭

```
┌─────────────────────────────────────┐
│         📅 월별 수입/지출             │
├─────────────────────────────────────┤
│  ┌─ 1월 ──────────────────────┐    │
│  │ 수입  ┌──────────┐         │    │
│  │       │ 140,806  │         │    │
│  │       └──────────┘         │    │
│  │ 지출  ┌──────────┐ (자동계산)│    │
│  │       │  68,340  │ ✓       │    │
│  │       └──────────┘         │    │
│  │                            │    │
│  │ 지출 상세          [+ 추가] │    │
│  │ ┌────────────────────────┐│    │
│  │ │ 대관료        40,000 ✕ ││    │
│  │ │ 간식비        28,340 ✕ ││    │
│  │ └────────────────────────┘│    │
│  │                            │    │
│  │ 상세 합계: 68,340 ✓ 일치   │    │
│  └────────────────────────────┘    │
│                                     │
│  ┌─ 2월 ──────────────────────┐    │
│  │ (접힌 상태 - 클릭하면 펼침)    │    │
│  │ 수입: 390,000 / 지출: 71,900 │    │
│  └────────────────────────────┘    │
│  ...                                │
└─────────────────────────────────────┘
```

### 4.4 수입내역 탭

```
┌─────────────────────────────────────┐
│         💰 수입 내역                  │
├─────────────────────────────────────┤
│                                     │
│  ┌────────────────────────────────┐│
│  │ 회비(14인)         1,630,000 ✕ ││
│  │ 행사지원금           145,050 ✕ ││
│  │ 예금이자               2,153 ✕ ││
│  └────────────────────────────────┘│
│                                     │
│  ┌────────────────────────────────┐│
│  │        [+ 항목 추가]            ││
│  └────────────────────────────────┘│
│                                     │
│  ─────────────────────────────────  │
│  합계                   1,777,203   │
│  월별 수입 합계          1,777,203   │
│  차이                          0 ✓  │
└─────────────────────────────────────┘
```

### 4.5 미리보기 탭

```
┌─────────────────────────────────────┐
│         👁️ 미리보기                  │
├─────────────────────────────────────┤
│                                     │
│  ┌────────────────────────────────┐│
│  │                                ││
│  │   (현재 만든 HTML 보고서 형태    ││
│  │    그대로 렌더링)               ││
│  │                                ││
│  │   <2025년 한랑드림 수입 지출 내역>││
│  │   ...                          ││
│  │                                ││
│  └────────────────────────────────┘│
│                                     │
│  ┌────────────────────────────────┐│
│  │       [📷 이미지로 저장]         ││
│  └────────────────────────────────┘│
│                                     │
└─────────────────────────────────────┘
```

---

## 5. 기능 상세

### 5.1 자동 계산

| 항목           | 계산 방식                                           |
| -------------- | --------------------------------------------------- |
| 월별 지출 총액 | 지출 상세 항목 합계 (자동) 또는 수동 입력 선택 가능 |
| 연간 수입 합계 | 12개월 수입 합산                                    |
| 연간 지출 합계 | 12개월 지출 합산                                    |
| 잔액           | 전년도 이월금 + 연간 수입 - 연간 지출               |

### 5.2 검증 기능

- 월별 지출 상세 합계 ≠ 월별 지출 총액 → 경고 표시
- 수입 내역 합계 ≠ 월별 수입 합계 → 경고 표시

### 5.3 데이터 저장

- 모든 입력은 실시간으로 localStorage에 자동 저장
- 앱 재접속 시 자동 불러오기
- 연도별로 별도 저장 (key: `accounting_2025`, `accounting_2024` 등)

### 5.4 이미지 저장 기능

- html2canvas로 보고서 영역을 캔버스로 변환
- PNG 이미지로 다운로드
- 고해상도 옵션 (scale: 2) 적용으로 선명한 이미지 출력

---

## 6. 보고서 출력 형식

### 6.1 수입 지출 내역 (상단)

```
<2025년 한랑드림 수입 지출 내역>

┌────────────────────────┐    2024 년
│      │ 수 입  │ 지 출  │      이월금 ₩ 370,482
│ 1월  │140,806 │ 68,340│
│ 2월  │390,000 │ 71,900│    2025년
│ ...  │  ...   │  ...  │      수 입 ₩ 1,777,203
│ 12월 │160,021 │450,600│      지 출 ₩ 1,994,780
├──────┼────────┼───────┤      잔 액 ₩ 152,905
│  계  │1,777,203│1,994,780│
└────────────────────────┘
```

### 6.2 지출 내역 (하단)

```
<2025년 한랑드림 지출내역>

┌────┬──────────────┬────────┬────┬──────────────┬────────┐
│ 월 │   지출내역    │  금액  │ 월 │   지출내역    │  금액  │
├────┼──────────────┼────────┼────┼──────────────┼────────┤
│1월 │ 대관료       │ 40,000 │7월 │ 대관료       │ 40,000 │
│    │ 간식비       │ 28,340 │    │ 간식비(8월)  │ 38,430 │
│    │              │        │    │ 간식비(2건)  │ 58,280 │
├────┼──────────────┼────────┼────┼──────────────┼────────┤
│2월 │ 대관료       │ 40,000 │8월 │ 대관료       │ 40,000 │
│    │ ...          │ ...    │    │ ...          │ ...    │
└────┴──────────────┴────────┴────┴──────────────┴────────┘

◈ 수입내역
    회비(14인)      1,630,000
    행사지원금        145,050
    예금이자            2,153
                  ───────────
                  ₩ 1,777,203

                          2025년 지출 합계 ₩1,994,780
```

### 6.3 출력 스타일 요구사항

- 월 칸은 표 외곽에 위치 (테두리 없음)
- 같은 월 내에서는 행 간 테두리 없음
- 월이 바뀔 때만 가로 테두리
- 좌측(1~6월)과 우측(7~12월) 월별 행 개수 맞춤
- 숫자는 천 단위 콤마
- 금액은 우측 정렬

---

## 7. 프로젝트 구조

```
src/
├── components/
│   ├── tabs/
│   │   ├── BasicInfoTab.tsx      # 기본정보 입력
│   │   ├── MonthlyInputTab.tsx   # 월별 수입/지출 입력
│   │   ├── IncomeDetailTab.tsx   # 수입내역 입력
│   │   └── PreviewTab.tsx        # 미리보기
│   ├── report/
│   │   ├── ReportPreview.tsx     # 보고서 전체 래퍼
│   │   ├── IncomeExpenseTable.tsx # 수입지출 표
│   │   ├── ExpenseDetailTable.tsx # 지출내역 표
│   │   └── SummaryBox.tsx        # 요약 박스
│   ├── common/
│   │   ├── NumberInput.tsx       # 숫자 입력 (콤마 포맷)
│   │   ├── ItemList.tsx          # 항목 추가/삭제 리스트
│   │   └── TabNavigation.tsx     # 탭 네비게이션
│   └── App.tsx
├── hooks/
│   ├── useAccountingData.ts      # 데이터 관리 훅
│   └── useLocalStorage.ts        # localStorage 훅
├── types/
│   └── accounting.ts             # 타입 정의
├── utils/
│   ├── calculations.ts           # 계산 로직
│   ├── formatters.ts             # 숫자 포맷팅
│   ├── storage.ts                # 저장/불러오기
│   └── imageExport.ts            # 이미지 저장 기능
└── main.tsx
```

---

## 8. 개발 단계

### Phase 1: 프로젝트 세팅 ✅

- [x] Vite + React + TypeScript 프로젝트 생성
- [x] Tailwind CSS v4 설정 (@tailwindcss/vite 플러그인)
- [x] 기본 폴더 구조 생성

### Phase 2: 타입 및 유틸리티 ✅

- [x] TypeScript 타입 정의 (src/types/accounting.ts)
- [x] localStorage 유틸리티 함수 (src/utils/storage.ts)
- [x] 숫자 포맷팅 함수 (src/utils/formatters.ts)
- [x] 계산 함수 (src/utils/calculations.ts)

### Phase 3: 데이터 관리 ✅

- [x] useAccountingData 훅 구현
- [x] 자동 저장 기능 (useEffect로 data 변경 시 저장)
- [x] 데이터 불러오기 기능

### Phase 4: 입력 UI ✅

- [x] 탭 네비게이션 컴포넌트
- [x] 기본정보 탭 UI
- [x] 월별입력 탭 UI (아코디언)
- [x] 수입내역 탭 UI
- [x] 숫자 입력 컴포넌트 (콤마 자동 포맷)
- [x] 항목 추가/삭제 컴포넌트

### Phase 5: 미리보기 및 이미지 저장 ✅

- [x] 보고서 미리보기 컴포넌트
- [x] 수입지출 표 컴포넌트
- [x] 지출내역 표 컴포넌트 (좌우 분할, rowSpan 처리)
- [x] html2canvas로 이미지 저장 기능 구현
- [x] oklch 색상 호환성 문제 해결 (인라인 스타일 사용)

### Phase 6: 마무리 ✅

- [x] 모바일 우선 레이아웃 (max-w-md, 중앙 정렬)
- [x] ESLint 에러 수정 (React hooks 규칙 준수)
- [x] 빌드 테스트 완료

---

## 11. 기술적 이슈 및 해결

### html2canvas oklch 색상 미지원

**문제**: Tailwind CSS v4가 oklch 색상 함수를 사용하는데, html2canvas가 이를 파싱하지 못함

**해결**: 보고서 컴포넌트들에서 Tailwind 클래스 대신 인라인 스타일로 hex 색상 직접 지정

### React hooks 규칙

**문제**: useEffect 내 setState 호출, 렌더 중 ref 접근

**해결**: 상태 기반 로직으로 전환, useCallback으로 이벤트 핸들러 최적화

---

## 9. 참고: 샘플 데이터

```typescript
const sampleData: AccountingData = {
  basicInfo: {
    year: 2025,
    clubName: "한랑드림",
    carryover: 370482,
  },
  monthlyData: [
    {
      month: 1,
      income: 140806,
      expense: 68340,
      expenseItems: [
        { id: "1", name: "대관료", amount: 40000 },
        { id: "2", name: "간식비", amount: 28340 },
      ],
    },
    // ... 2~12월
  ],
  incomeItems: [
    { id: "1", name: "회비(14인)", amount: 1630000 },
    { id: "2", name: "행사지원금", amount: 145050 },
    { id: "3", name: "예금이자", amount: 2153 },
  ],
  lastUpdated: "2025-01-04T12:00:00Z",
};
```

---

## 10. 배포

```bash
# 빌드
npm run build

# Vercel 배포 (추천)
vercel deploy

# 또는 GitHub Pages
# vite.config.ts에 base 설정 후
npm run build
# dist 폴더를 gh-pages 브랜치에 푸시
```

---

이 계획서를 Claude Code에 전달하고 "이 계획서대로 개발해줘"라고 하면 됩니다.
